<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆè°±ä»ªå™¨å¹´ä¼šæŠ½å¥–</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to bottom right, #FF6B6B, #C92A2A);
            text-align: center;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 30px;
        }

        h1 {
            color: white;
            font-size: 42px;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            letter-spacing: 8px;
        }

        h1::before {
            content: "ğŸŠ ";
        }

        h1::after {
            content: " ğŸŠ";
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            background-color: #FFD700;
            color: #C92A2A;
            border-radius: 30px;
            border: none;
            transition: all 0.3s ease;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2);
            margin: 0 auto;
            font-weight: bold;
        }

        button:hover {
            background-color: #FFC700;
            transform: translateY(-3px);
            box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.3);
        }

        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
            color: #666;
        }

        /* ä¸“é—¨çš„æ»šåŠ¨æ•°å­—å±•ç¤ºåŒºåŸŸ */
        #rolling-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            min-height: 220px;
        }

        #rolling-area {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            padding: 40px 60px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            font-size: 150px;
            font-weight: bold;
            color: #FF1744;
            text-shadow: 0 0 40px rgba(255, 23, 68, 0.6),
                         0 0 80px rgba(255, 23, 68, 0.4),
                         0 5px 10px rgba(0, 0, 0, 0.3);
            display: none;
            border: 6px solid #FFD700;
            letter-spacing: 10px;
            min-width: 320px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ç§»é™¤é¢¤æŠ–åŠ¨ç”»ï¼Œä¿æŒæ•°å­—æ¸…æ™° */
        .rolling {
            /* ä¸æ·»åŠ åŠ¨ç”»ï¼Œä¿æŒç¨³å®š */
        }

        /* è·å¥–åå•åŒºåŸŸ */
        #result {
            font-size: 24px;
            font-weight: 500;
            color: #333;
            background-color: white;
            padding: 20px 30px;
            border-radius: 10px;
            box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.1);
            display: none;
            max-width: 600px;
            margin: 0 auto 30px auto;
            transition: all 0.5s ease;
        }

        /* æŠ½å¥–ç»“æŸåï¼Œä¸­å¥–åå•ä¸Šç§» */
        #result.finished {
            transform: translateY(-220px);
        }

        .result-heading {
            font-size: 18px;
            color: #888;
            margin-bottom: 10px;
        }

        .winners-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .winner-number {
            font-size: 32px;
            font-weight: 600;
            color: #C92A2A;
            background: linear-gradient(135deg, #FF6B6B 0%, #C92A2A 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            padding: 10px 20px;
            border: 2px solid #FF6B6B;
            border-radius: 10px;
            opacity: 0;
            transform: scale(0);
        }

        /* æ•°å­—å‡ºç°åŠ¨ç”» */
        @keyframes popIn {
            0% {
                opacity: 0;
                transform: scale(0);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .pop-in {
            animation: popIn 0.5s ease-out forwards;
        }

        /* è¿›åº¦æç¤º */
        #progress {
            color: white;
            font-size: 20px;
            margin-top: 20px;
            display: none;
        }

        /* å‰©ä½™å·ç æ± æ˜¾ç¤º */
        #pool-info {
            color: white;
            font-size: 18px;
            margin-top: 15px;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 500;
        }

        #pool-info .pool-number {
            font-size: 24px;
            font-weight: bold;
            color: #FFD700;
        }

        /* é‡ç½®æŒ‰é’® */
        #resetBtn {
            padding: 12px 25px;
            font-size: 16px;
            cursor: pointer;
            background-color: #FFF;
            color: #C92A2A;
            border-radius: 25px;
            border: 2px solid #FFD700;
            transition: all 0.3s ease;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
            font-weight: bold;
            display: none;
        }

        #resetBtn:hover {
            background-color: #FFD700;
            transform: translateY(-2px);
            box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
<div class="container">
    <h1>åˆè°±ä»ªå™¨å¹´ä¼šæŠ½å¥–</h1>
    <button id="startBtn" onclick="startDrawing()">å¼€å§‹æŠ½å¥–</button>
    <button id="resetBtn" onclick="resetLottery()">ğŸ”„ é‡ç½®æŠ½å¥–</button>

    <div id="pool-info">
        å‰©ä½™å·ç æ± ï¼š<span class="pool-number" id="poolCount">85</span> ä¸ª
    </div>

    <div id="progress"></div>

    <!-- ä¸“é—¨çš„æ»šåŠ¨æ•°å­—å±•ç¤ºåŒºåŸŸ -->
    <div id="rolling-container">
        <div id="rolling-area"></div>
    </div>

    <!-- è·å¥–åå• -->
    <div id="result">
        <div class="result-heading">ğŸ‰ æ­å–œä¸­å¥–ï¼è·å¥–åå•ï¼š</div>
        <div class="winners-list" id="winners"></div>
    </div>
</div>

<script>
    let people = [];
    let winners = [];
    let isDrawing = false;

    // åˆå§‹åŒ–1åˆ°85çš„æ•°å­—æ•°ç»„
    function initPeople() {
        people = [];
        for (let i = 1; i <= 85; i++) {
            people.push(i);
        }
        updatePoolCount();
    }

    // æ›´æ–°å‰©ä½™å·ç æ± æ˜¾ç¤º
    function updatePoolCount() {
        document.getElementById("poolCount").innerText = people.length;
    }

    // åˆå§‹åŒ–å·ç æ± 
    initPeople();

    // é‡ç½®æŠ½å¥–ç³»ç»Ÿ
    function resetLottery() {
        if (isDrawing) return;
        
        if (confirm("ç¡®å®šè¦é‡ç½®æŠ½å¥–å—ï¼Ÿè¿™å°†æ¸…ç©ºæ‰€æœ‰ä¸­å¥–è®°å½•ï¼")) {
            // é‡ç½®æ‰€æœ‰æ•°æ®
            initPeople();
            winners = [];
            
            // é‡ç½®ç•Œé¢
            document.getElementById("winners").innerHTML = "";
            document.getElementById("result").style.display = "none";
            document.getElementById("result").classList.remove("finished");
            document.getElementById("progress").style.display = "none";
            document.getElementById("progress").innerHTML = "";
            document.getElementById("rolling-area").style.visibility = "hidden";
            document.getElementById("resetBtn").style.display = "none";
            document.getElementById("startBtn").disabled = false;
        }
    }

    // å¼€å§‹æŠ½å¥–
    function startDrawing() {
        if (isDrawing) return;
        
        // æ£€æŸ¥å‰©ä½™å·ç æ˜¯å¦è¶³å¤Ÿ
        if (people.length < 5) {
            alert(`å‰©ä½™å·ç ä¸è¶³ï¼å½“å‰å‰©ä½™ ${people.length} ä¸ªå·ç ï¼Œéœ€è¦è‡³å°‘ 5 ä¸ªå·ç æ‰èƒ½æŠ½å¥–ã€‚\n\nè¯·ç‚¹å‡»"é‡ç½®æŠ½å¥–"æŒ‰é’®é‡æ–°å¼€å§‹ã€‚`);
            return;
        }
        
        isDrawing = true;
        
        // æ¸…ç©ºå½“å‰è½®æ¬¡çš„ä¸­å¥–æ•°ç»„ï¼Œåªä¿ç•™æœ¬æ¬¡æŠ½å–çš„å·ç 
        winners = [];
        
        // ç¦ç”¨æŒ‰é’®
        document.getElementById("startBtn").disabled = true;
        document.getElementById("resetBtn").style.display = "none";
        
        // æ¸…ç©ºè·å¥–åå•æ˜¾ç¤º
        document.getElementById("winners").innerHTML = "";
        
        document.getElementById("result").style.display = "block";
        document.getElementById("result").classList.remove("finished");
        document.getElementById("progress").style.display = "block";
        
        // å¼€å§‹ç¬¬ä¸€æ¬¡æŠ½å–
        drawSingleNumber(0);
    }

    // æŠ½å–å•ä¸ªæ•°å­—
    function drawSingleNumber(round) {
        if (round >= 5) {
            // å…¨éƒ¨æŠ½å–å®Œæˆ
            document.getElementById("progress").innerHTML = "âœ¨ æŠ½å¥–å®Œæˆï¼";
            document.getElementById("startBtn").disabled = false;
            
            // æŠ½å¥–ç»“æŸåï¼Œéšè—æ»šåŠ¨åŒºåŸŸå¹¶è®©ä¸­å¥–åå•ä¸Šç§»
            document.getElementById("rolling-area").style.visibility = "hidden";
            document.getElementById("result").classList.add("finished");
            
            // æ˜¾ç¤ºé‡ç½®æŒ‰é’®
            document.getElementById("resetBtn").style.display = "inline-block";
            
            // æ›´æ–°å‰©ä½™å·ç æ± 
            updatePoolCount();
            
            isDrawing = false;
            return;
        }

        // æ›´æ–°è¿›åº¦
        document.getElementById("progress").innerHTML = `æ­£åœ¨æŠ½å–ç¬¬ ${round + 1} ä¸ªå¹¸è¿æ•°å­—...`;

        // æ˜¾ç¤ºæ»šåŠ¨åŒºåŸŸ
        let rollingArea = document.getElementById("rolling-area");
        rollingArea.style.display = "flex";
        rollingArea.style.visibility = "visible";
        rollingArea.classList.add("rolling");

        // æ»šåŠ¨æ•°å­—æ•ˆæœï¼ˆå¿«é€Ÿå˜åŒ–æ•°å­—ï¼‰
        let rollCount = 0;
        let rollInterval = setInterval(function() {
            let randomNum = people[Math.floor(Math.random() * people.length)];
            rollingArea.innerText = randomNum;
            rollCount++;

            // æ»šåŠ¨2ç§’ååœæ­¢
            if (rollCount >= 20) {
                clearInterval(rollInterval);
                
                // æœ€ç»ˆæŠ½å–ä¸€ä¸ªæ•°å­—
                let randomIndex = Math.floor(Math.random() * people.length);
                let winnerNumber = people.splice(randomIndex, 1)[0];
                winners.push(winnerNumber);
                
                // æ˜¾ç¤ºæœ€ç»ˆæ•°å­—
                rollingArea.innerText = winnerNumber;
                rollingArea.classList.remove("rolling");
                
                // ç­‰å¾…0.8ç§’åæ˜¾ç¤ºåœ¨åå•ä¸­
                setTimeout(function() {
                    addToWinnersList(winnerNumber);
                    
                    // éšè—æ»šåŠ¨åŒºåŸŸ
                    rollingArea.style.visibility = "hidden";
                    
                    // ç­‰å¾…0.5ç§’åè¿›è¡Œä¸‹ä¸€è½®æŠ½å–
                    setTimeout(function() {
                        drawSingleNumber(round + 1);
                    }, 500);
                }, 800);
            }
        }, 100); // æ¯100mså˜åŒ–ä¸€æ¬¡æ•°å­—
    }

    // å°†æ•°å­—æ·»åŠ åˆ°è·å¥–åå•
    function addToWinnersList(number, animate = true) {
        let winnersDiv = document.getElementById("winners");
        let numberSpan = document.createElement("div");
        numberSpan.className = "winner-number";
        numberSpan.innerText = number;
        winnersDiv.appendChild(numberSpan);
        
        // å¦‚æœéœ€è¦åŠ¨ç”»æ•ˆæœ
        if (animate) {
            setTimeout(function() {
                numberSpan.classList.add("pop-in");
            }, 50);
        } else {
            // ç›´æ¥æ˜¾ç¤ºï¼Œä¸éœ€è¦åŠ¨ç”»
            numberSpan.style.opacity = "1";
            numberSpan.style.transform = "scale(1)";
        }
    }
</script>
</body>
</html>